# This Dockerfile is a custom Infrahub build to include the python package containing protocols ...
# It can now be imported and used within the Infrahub environment (in generators for example).
ARG INFRAHUB_BASE_VERSION=1.3.2
FROM registry.opsmill.io/opsmill/infrahub:${INFRAHUB_BASE_VERSION}

WORKDIR /opt/local
COPY pyproject.toml poetry.lock README.md ./
COPY service_catalog/ service_catalog/

RUN poetry install --no-ansi --no-interaction

WORKDIR /source